services:
  member-web-app:
    build: .\Client\Member
    ports:
    - "4200:80"
  jcu-api:
    image: jesterapi:latest
    ports:
    - "5005:8080"
    environment:
    - BrassLoonLogClientId=${BrassLoonApiClientId}
    - BrassLoonLogClientSecret=${BrassLoonApiClientSecret}
    - IdentitificationCardContainerName=${IdentitificationCardContainerName}
    - EncryptionKeyVault=${EncryptionKeyVault}
    - CorsOrigins__0=${CorsOrigins__0}
    - JwkAddress=${JwkAddress}
    - GoogleIdAudiences__0=${GoogleIdAudiences__0}
    - GoogleIdAudiences__1=${GoogleIdAudiences__1}
    - BrassLoonConfigApiBaseAddress=${BrassLoonConfigApiBaseAddress}
    - BrassLoonLogApiBaseAddress=${BrassLoonLogApiBaseAddress}
    - BrassLoonLogRpcBaseAddress=${BrassLoonLogRpcBaseAddress}
    - BrassLoonAccountApiBaseAddress=${BrassLoonAccountApiBaseAddress}
    - BrassLoonWorkTaskApiBaseAddress=${BrassLoonWorkTaskApiBaseAddress}
    - BrassLoonAuthorizationApiBaseAddress=${BrassLoonAuthorizationApiBaseAddress}
    - BrassLoonDomainId=${BrassLoonDomainId}
    - AuthorizationDomainId=${AuthorizationDomainId}
    - ConfigDomainId=${ConfigDomainId}
    - LogDomainId=${LogDomainId}
    - WorkTaskDomainId=${WorkTaskDomainId}
  btch-loan-service-bus-processor:
    image: jesterbatchloanservicebusprocessor:latest
    environment:
    - BrassLoonClientId=${BrassLoonBatchClientId}
    - BrassLoonClientSecret=${BrassLoonBatchClientSecret}
    - ClientId=${ClientId}
    - ClientSecret=${ClientSecret}
    - ServiceBusNamespace=${ServiceBusNamespace}
    - ServiceBusNewLoanAppQueue=${ServiceBusNewLoanAppQueue}
    - RunHours=6
    - AZURE_TENANT_ID=${ServiceBusTenantId}
    - AZURE_CLIENT_ID=${ServiceBusClientId}
    - AZURE_CLIENT_SECRET=${ServiceBusClientSecret}
    - LoanApiBaseAddress=http://host.docker.internal:5006/api
    - ApiBaseAddress=http://jcu-api:8080/api
